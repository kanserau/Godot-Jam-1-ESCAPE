[gd_scene load_steps=16 format=3 uid="uid://dywybntaextrq"]

[ext_resource type="PackedScene" uid="uid://dafuflv68obm5" path="res://assets/props/fire_extinguisher/fire_extinguisher.gltf" id="1_esoa3"]
[ext_resource type="Script" path="res://assets/props/fire_extinguisher/fire_extinguisher.gd" id="2_1w60x"]
[ext_resource type="Shader" path="res://assets/vfx/explosion/explosion.gdshader" id="2_istrf"]
[ext_resource type="Texture2D" uid="uid://pio1xomvsn7d" path="res://assets/vfx/explosion/blue_edit.png" id="3_jyhx4"]
[ext_resource type="Script" path="res://assets/props/pass_fix.gd" id="3_v7n2o"]
[ext_resource type="Texture2D" uid="uid://dsxtloa6q0jrp" path="res://assets/vfx/explosion/green_edit.png" id="4_4hl2v"]
[ext_resource type="Texture2D" uid="uid://bals24cxjar02" path="res://assets/vfx/explosion/red_edit.png" id="5_ntjgk"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_3xlac"]
points = PackedVector3Array(-580.959, 1675.15, -1.74023, -578.69, 1675.36, 12.89, -577.762, 1772.8, -1.74023, -578.69, 1675.36, -16.4297, -428.522, 121.751, -15.2451, -430.585, 121.751, -1.74023, -428.522, 121.751, 11.7054, -571.986, 1675.58, 26.1579, -568.892, 1771.3, 26.1579, -575.493, 1772.37, 12.89, -575.493, 1772.37, -16.4297, -553.215, 1859.72, -1.74023, -568.892, 1771.3, -29.6383, -571.986, 1675.58, -29.6383, -422.334, 121.751, -27.3875, -296.197, 41.4837, -82.9468, -280.313, 26.4605, -77.7937, -293.721, 26.4605, 7.1445, -280.313, 26.4605, 92.0235, -296.197, 41.4837, 97.1766, -422.334, 121.751, 23.8478, -561.466, 1675.79, 36.6419, -558.578, 1769.37, 36.6419, -261.749, 63.5893, 183.477, -195.328, 63.5893, 249.817, -536.198, 1850.49, 36.6419, -545.377, 1855.43, 26.1579, -551.152, 1858.43, 12.89, -551.152, 1858.43, -16.4297, -545.377, 1855.43, -29.6383, -501.646, 1927.54, 12.89, -503.09, 1929.26, -1.74023, -501.646, 1927.54, -16.4297, -536.198, 1850.49, -40.1816, -558.578, 1769.37, -40.1816, -561.466, 1675.79, -40.1816, -412.639, 121.751, -37.0423, -194.709, 55.6484, -234.758, -260.923, 55.6484, -168.596, -258.551, 47.9222, -166.878, -254.735, 41.4837, -164.153, -241.224, 26.4605, -154.321, -217.812, 13.3688, -137.321, -252.776, 13.3688, -68.7905, -264.74, 13.3688, 7.1445, -252.776, 13.3688, 83.0795, -241.224, 26.4605, 168.61, -254.735, 41.4837, 178.383, -258.551, 47.9222, 181.167, -260.923, 55.6484, 182.885, -195.328, 1475.99, 246.263, -196.772, 418.137, 250.705, -196.772, 493.682, 250.468, -545.583, 1767.22, 43.3943, -524.749, 1844.27, 43.3943, -111.684, 1475.99, 288.85, -194.709, 55.6484, 249.047, -111.684, 63.5893, 292.463, -490.92, 1914.23, 36.6419, -87.343, 2007.38, 191.473, -497.418, 1922.39, 26.1579, -497.418, 1922.39, -29.6383, -490.92, 1914.23, -40.1816, -428.316, 1967.24, 26.1579, -430.482, 1973.47, 12.89, -431.307, 1975.61, -1.74023, -430.482, 1973.47, -16.4297, -428.316, 1967.24, -29.6383, -524.749, 1844.27, -46.8748, -482.772, 1904.15, -46.8748, -545.583, 1767.22, -46.8748, -110.549, 1522.99, -281.847, -193.162, 1522.99, -239.733, -195.328, 1475.99, -239.141, -196.772, 493.682, -238.845, -196.772, 418.137, -238.608, -195.328, 63.5893, -235.587, -111.374, 55.6484, -277.227, -110.549, 47.9222, -274.443, -193.059, 47.9222, -232.388, -190.274, 41.4837, -228.597, -180.476, 26.4605, -215.093, -163.459, 13.3688, -191.696, -126.432, 8.21801, -140.757, -166.862, 8.21801, -100.302, -192.853, 8.21801, -49.3625, -201.826, 8.21801, 7.1445, -217.812, 13.3688, 151.551, -192.853, 8.21801, 63.5923, -166.862, 8.21801, 114.531, -180.476, 26.4605, 229.382, -190.274, 41.4837, 242.886, -193.059, 47.9222, 246.677, -112.509, 493.682, 293.411, -112.509, 418.137, 293.648, -110.549, 1522.99, 281.802, -100.029, 1982.48, 191.473, -18.9629, 1475.99, 303.54, -111.374, 55.6484, 291.516, -110.549, 47.9222, 288.732, -18.9629, 63.5893, 307.153, -18.9629, 418.137, 308.515, -67.6438, 2027.12, 191.473, -424.809, 1957.37, -40.1816, -420.477, 1944.92, -46.8748, -42.7877, 2039.79, 191.473, -83.0113, 2114.26, 50.5613, -83.2175, 2115.33, 47.7182, -83.2175, 2115.33, -47.7632, -83.0113, 2114.26, -50.6656, -107.145, 1568.7, -271.363, -18.9629, 1568.7, -285.341, -18.9629, 1522.99, -296.358, -111.684, 1475.99, -281.787, -112.509, 493.682, -281.847, -112.509, 418.137, -281.551, -111.684, 63.5893, -278.174, -18.9629, 63.5893, -292.864, -18.9629, 55.6484, -291.857, -18.9629, 47.9222, -288.955, -109.105, 41.4837, -270, -103.948, 26.4605, -254.126, -94.9752, 13.3688, -226.584, -18.9629, 2.42334, 7.1445, -75.4822, 8.21801, -166.7, -163.459, 13.3688, 205.926, -126.432, 8.21801, 154.987, -103.948, 26.4605, 268.415, -109.105, 41.4837, 284.23, -18.9629, 493.682, 308.219, -18.9629, 1522.99, 296.254, 73.6546, 1475.99, 288.85, 72.5201, 1522.99, 281.802, 74.4797, 493.682, 293.411, -18.9629, 55.6484, 306.146, -18.9629, 47.9222, 303.184, -18.9629, 41.4837, 298.505, 73.3452, 55.6484, 291.516, 73.6546, 63.5893, 292.463, 74.4797, 418.137, 293.648, -15.1468, 2044.08, 191.473, 430.82, 2193.67, 50.5613, 430.717, 2194.95, 47.7182, 430.717, 2194.95, -47.7632, 430.82, 2193.67, -50.6656, -18.9629, 1612.27, -267.335, 431.129, 2190.88, -51.8502, 69.1166, 1568.7, -271.363, 72.5201, 1522.99, -281.847, 73.6546, 1475.99, -281.787, -18.9629, 1475.99, -296.477, -18.9629, 493.682, -296.595, -18.9629, 418.137, -296.358, 73.6546, 63.5893, -278.174, 73.3452, 55.6484, -277.227, 74.4797, 418.137, -281.551, 72.5201, 47.9222, -274.443, 71.0762, 41.4837, -270, -18.9629, 41.4837, -284.275, -18.9629, 26.4605, -267.572, -18.9629, 13.3688, -238.608, -18.9629, 8.21801, -175.644, 37.4534, 8.21801, -166.7, 88.4033, 8.21801, -140.757, 128.833, 8.21801, -100.302, 154.824, 8.21801, -49.3625, 163.797, 8.21801, 7.1445, 154.824, 8.21801, 63.5923, 128.833, 8.21801, 114.531, 88.4033, 8.21801, 154.987, 37.4534, 8.21801, 180.989, -18.9629, 8.21801, 189.874, -75.4822, 8.21801, 180.989, -94.9752, 13.3688, 240.813, -18.9629, 26.4605, 281.861, -18.9629, 13.3688, 252.897, 37.2471, 2027.12, 191.473, 12.3909, 2039.79, 191.473, 157.299, 1475.99, 246.263, 431.129, 2190.88, 51.7459, 56.9464, 2007.38, 191.473, 158.743, 493.682, 250.468, 72.5201, 47.9222, 288.732, 71.0762, 41.4837, 284.23, 65.9193, 26.4605, 268.415, 156.68, 55.6484, 249.047, 157.299, 63.5893, 249.817, 158.743, 418.137, 250.705, 433.605, 2174.35, 51.7459, 433.605, 2174.35, -51.8502, 155.133, 1522.99, -239.733, 157.299, 1475.99, -239.141, 74.4797, 493.682, -281.847, 157.299, 63.5893, -235.587, 156.68, 55.6484, -234.758, 158.743, 418.137, -238.608, 155.03, 47.9222, -232.388, 152.245, 41.4837, -228.597, 142.447, 26.4605, -215.093, 65.9193, 26.4605, -254.126, 56.9464, 13.3688, -226.584, 125.43, 13.3688, -191.696, 179.783, 13.3688, -137.321, 214.747, 13.3688, -68.7905, 226.711, 13.3688, 7.1445, 214.747, 13.3688, 83.0795, 179.783, 13.3688, 151.551, 125.43, 13.3688, 205.926, 56.9464, 13.3688, 240.813, 472.694, 1833.97, 40.4919, 155.03, 47.9222, 246.677, 152.245, 41.4837, 242.886, 142.447, 26.4605, 229.382, 222.895, 55.6484, 182.885, 223.72, 63.5893, 183.477, 472.694, 1833.97, -40.7739, 158.743, 493.682, -238.845, 223.72, 63.5893, -169.188, 222.895, 55.6484, -168.596, 220.522, 47.9222, -166.878, 216.706, 41.4837, -164.153, 203.195, 26.4605, -154.321, 242.284, 26.4605, -77.7937, 255.692, 26.4605, 7.1445, 203.195, 26.4605, 168.61, 242.284, 26.4605, 92.0235, 266.316, 63.5893, 99.842, 280.961, 63.5893, 7.1445, 220.522, 47.9222, 181.167, 216.706, 41.4837, 178.383, 265.387, 55.6484, 99.5459, 266.316, 63.5893, -85.553, 265.387, 55.6484, -85.2569, 262.603, 47.9222, -84.3684, 258.168, 41.4837, -82.9468, 272.401, 41.4837, 7.1445, 258.168, 41.4837, 97.1766, 280.033, 55.6484, 7.1445, 262.603, 47.9222, 98.5982, 277.042, 47.9222, 7.1445)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_7snth"]
render_priority = 0
shader = ExtResource("2_istrf")
shader_parameter/fire_color = Color(0.686275, 0.886275, 0.996078, 1)
shader_parameter/fire_strength = 4.3
shader_parameter/warble_strength = 0.2
shader_parameter/time_scale = 1.0
shader_parameter/alpha_scissor = 0.23
shader_parameter/red_texture = ExtResource("5_ntjgk")
shader_parameter/green_texture = ExtResource("4_4hl2v")
shader_parameter/blue_texture = ExtResource("3_jyhx4")

[sub_resource type="Gradient" id="Gradient_gy5bi"]
offsets = PackedFloat32Array(0.797235, 0.937788, 1)
colors = PackedColorArray(0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_ynup8"]
gradient = SubResource("Gradient_gy5bi")

[sub_resource type="Curve" id="Curve_ihpge"]
max_value = 4.0
_data = [Vector2(0, 3.15584), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_c66f0"]
curve = SubResource("Curve_ihpge")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_64dyj"]
emission_shape = 1
emission_sphere_radius = 1.0
angle_max = 720.0
gravity = Vector3(0, 3, 0)
radial_accel_min = 45.0
radial_accel_max = 45.0
radial_accel_curve = SubResource("CurveTexture_c66f0")
attractor_interaction_enabled = false
scale_min = 1.5
scale_max = 1.5
color_ramp = SubResource("GradientTexture1D_ynup8")

[sub_resource type="QuadMesh" id="QuadMesh_jowei"]

[node name="Fire extinguisher" instance=ExtResource("1_esoa3")]
transform = Transform3D(0.001, 0, 0, 0, 0.001, 0, 0, 0, 0.001, 0, 0, 0)
script = ExtResource("2_1w60x")

[node name="StaticBody3D" type="StaticBody3D" parent="." index="0" node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 2.22045e-16, 1, 0, -1, 2.22045e-16, 0, 0, 0)
collision_layer = 3
script = ExtResource("3_v7n2o")
target = NodePath("..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_3xlac")

[node name="GPUParticles3D" type="GPUParticles3D" parent="." index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1160.28, 0)
material_override = SubResource("ShaderMaterial_7snth")
emitting = false
amount = 128
lifetime = 0.2
one_shot = true
process_material = SubResource("ParticleProcessMaterial_64dyj")
draw_pass_1 = SubResource("QuadMesh_jowei")

[node name="Timer" type="Timer" parent="." index="3"]
wait_time = 0.2
one_shot = true

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
